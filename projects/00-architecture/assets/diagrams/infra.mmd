graph TB
    subgraph "External Access"
        User[ğŸ‘¤ User]
        WebUI[ğŸ–¥ï¸ WebUI Interface]
    end
    
    subgraph "VPC-Brown (Public Tier)" 
        ALB[ğŸ”„ Application Load Balancer]
        AGW[ğŸŒ API Gateway]
        Brown[ğŸ¤– Agent Brown<br/>Input Validator & Router]
        ModLambda[ğŸ›¡ï¸ Moderation Lambda]
    end
    
    subgraph "Shared Communication Layer"
        S3Bridge[ğŸ“¦ S3 Communication Bridge<br/>task_config.json]
        EventBridge[âš¡ EventBridge Triggers]
    end
    
    subgraph "VPC-Bayko (Private Tier)"
        Bayko[ğŸ§  Agent Bayko<br/>MCP Orchestrator]
        MCPRouter[ğŸ”€ MCP Router]
        
        subgraph "AI Toolchain"
            LLM[ğŸ¤– Language Models]
            DataProcessor[ğŸ“Š Data Processor]
            Validator[âœ… Quality Validator]
            Assembler[ğŸ”§ Output Assembler]
        end
        
        NAT[ğŸŒ NAT Gateway]
    end
    
    subgraph "Output & Delivery"
        OutputS3[ğŸ“ Output S3 Bucket]
        CloudFront[â˜ï¸ CloudFront CDN]
    end
    
    subgraph "Monitoring & Security"
        CloudWatch[ğŸ“Š CloudWatch Logs]
        IAM[ğŸ” IAM Roles & Policies]
    end
    
    %% External Flow
    User --> WebUI
    WebUI --> ALB
    ALB --> AGW
    AGW --> Brown
    
    %% Cross-VPC Communication
    Brown --> S3Bridge
    Brown --> ModLambda
    S3Bridge --> EventBridge
    EventBridge --> Bayko
    
    %% Internal Bayko Processing
    Bayko --> MCPRouter
    MCPRouter --> LLM
    MCPRouter --> DataProcessor
    MCPRouter --> Validator
    MCPRouter --> Assembler
    
    %% Output Flow
    Bayko --> OutputS3
    OutputS3 --> CloudFront
    CloudFront --> WebUI
    
    %% Network & Security
    Bayko --> NAT
    Brown --> CloudWatch
    Bayko --> CloudWatch
    IAM -.-> Brown
    IAM -.-> Bayko
    
    classDef publicTier fill:#e1f5fe
    classDef privateTier fill:#f3e5f5
    classDef sharedLayer fill:#fff3e0
    classDef aiTools fill:#e8f5e8
    
    class ALB,AGW,Brown,ModLambda publicTier
    class Bayko,MCPRouter,NAT privateTier
    class S3Bridge,EventBridge sharedLayer
    class LLM,DataProcessor,Validator,Assembler aiTools